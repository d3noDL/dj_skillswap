{% load static %}

<div class="card h-100  d-flex flex-column">
  <div class="card-body d-flex flex-column">

    {% if request.user == post.profile.user %}
    <div class="dropdown ms-auto" style="position: relative;">
      <a class="text-muted dropdown-toggle font-size-14" href="#" role="button" data-bs-toggle="dropdown"
        aria-haspopup="true">
        <i class="bx bx-dots-horizontal-rounded"></i>
      </a>
      <div class="dropdown-menu dropdown-menu-end fs-6">
        <a class="dropdown-item" href="{% url 'dj_skillswap_app:post_update' post.id %}">Edit</a>
        {% if post.status %}
        <a class="dropdown-item" href="{% url 'dj_skillswap_app:toggle_post_status' post.id %}">Inactive</a>
        {% else %}
        <a class="dropdown-item text-success"
          href="{% url 'dj_skillswap_app:toggle_post_status' post.id %}">Activate</a>
        {% endif %}
      </div>
    </div>
    {% endif %}

    <div class="d-flex align-items-center">
      <div>
        {% if post.profile.profile_picture %}
						<img src="{{ post.profile.profile_picture.url }}" alt="Profile picture" class="avatar-md rounded-circle img-thumbnail"
							style="max-width: 250px; height: auto;">
						{% else %}
						<img src="{% static 'images/avatar-placeholder.jpg' %}" alt="Profile picture" class="avatar-md rounded-circle img-thumbnail"
							style="max-width: 250px; height: auto;">
						{% endif %}
      </div>

      <div class="flex-1 ms-3">
        <h5 class="font-size-16 mb-1">
          <a href="#" class="text-dark">{{ post.type }}</a>
        </h5>
        <span class="badge badge-{% if post.status %}soft-success{% else %}soft-danger{% endif %}">
          {% if post.status %}Active{% else %}Inactive{% endif %}
        </span>

      </div>
    </div>
    <div class="mt-3 pt-1">
      <p>
        <span class="badge text-bg-primary">{{ post.skill.name }}</span>
        <span class="badge text-bg-primary">{{ post.skill.category.name }}</span>
      </p>

      <!-- Rating -->
      <div class="star-rating readonly ">
        {% for i in "12345" %}
          {% if i|add:"0" <= post.profile.average_rating %}
            <i class="bi bi-star-fill text-warning"></i>
          {% elif i|add:"0" < post.profile.average_rating|add:"1" %}
            <i class="bi bi-star-half text-warning"></i>
          {% else %}
            <i class="bi bi-star text-warning"></i>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="mt-3 pt-1 flex-grow-1">
      <p class="text-muted mb-0">{{ post.pitch }}</p>
      <p class="text-muted mb-0 mt-2">
        <i class="bx bxs-calendar-alt font-size-15 align-middle pe-2 text-primary"></i>{{ post.avaliability }}
      </p>
    </div>

    <div class="d-flex gap-2 pt-3 mt-auto">
      <a href="{% url 'dj_skillswap_app:post_details' post.id %}" class="btn button btn-sm w-50">Details</a>
      <a href="{% url 'dj_skillswap_app:send_message' post.profile.id  %}" class="btn button btn-sm w-50">
        <i class="bx bx-message-square-dots me-1"></i> Contact
      </a>
    </div>

  </div>
</div>